import{p as e,o as s,i as a,f as t,h as o,e as r,g as n,s as l,$ as c,u as i,R as d,m as u,n as f,F as m,S as p,c as g,k,r as h,y,K as b,t as v,v as x,j as _,B as w,D as P,T as A,q as C,P as I,U as L,x as j,V as T}from"../chunks/yhfIZjQS.js";import{b as $,e as S}from"../chunks/Gtg5FvpE.js";import{B as X}from"../chunks/BjdPuYB1.js";import{C as q}from"../chunks/DTM5bnsF.js";var D=t('<meta name="description" content="Login to Xanthus K3s Deployment Tool"/>'),K=t('<p class="mt-1 text-sm text-red-600"> </p>'),B=t('<div class="text-center mb-8"><img src="/static/icons/logo.png" alt="Xanthus Logo" class="w-24 h-24 mx-auto mb-4"/> <h1 class="text-3xl font-bold text-gray-900 mb-2">Xanthus</h1> <p class="text-gray-600">K3s Deployment Tool</p></div> <form class="space-y-4"><div><label for="cf_token" class="block text-sm font-medium text-gray-700 mb-2">Cloudflare API Token</label> <input type="password" id="cf_token" required placeholder="Enter your Cloudflare API token"/> <p class="mt-1 text-xs text-gray-500">Need a token? <a href="https://dash.cloudflare.com/profile/api-tokens" target="_blank" class="text-blue-600 hover:underline">Create one here</a></p> <!></div> <!></form> <div class="mt-6 text-center"><p class="text-xs text-gray-500">Your API token is used to verify access to Cloudflare services and is stored securely.</p></div>',1),R=t('<div class="min-h-screen bg-gray-100 flex items-center justify-center p-4"><!></div>');function V(t,V){e(V,!1);const[E,F]=l();let N=h(""),U=h(!1),W=h({});async function Y(){C(U,!0),C(W,{});try{if(!k(N).trim())return T(W,k(W).cf_token="Cloudflare API token is required"),void C(U,!1);await $.login(k(N))?(S.showSuccess("Login Successful","Welcome back! Redirecting to dashboard..."),setTimeout(()=>{d("/app")},1e3)):T(W,k(W).cf_token="Invalid Cloudflare API token. Please check your token and try again.")}catch(e){console.error("Login error:",e),T(W,k(W).cf_token=e.message||"Login failed. Please try again.")}finally{C(U,!1)}}function z(){k(W).cf_token&&C(W,{...k(W),cf_token:""})}s(async()=>{setTimeout(()=>{i($,"$authStore",E).isAuthenticated&&d("/app")},100)}),a();var G=R();o(e=>{var s=D();c.title="Xanthus - Login",r(e,s)});var H=u(G);q(H,{class:"w-full max-w-md",children:(e,s)=>{var a=B(),t=f(m(a),2),o=u(t),n=f(u(o),2);let l;p(n);var c=f(n,4),i=e=>{var s=K(),a=u(s,!0);y(s),_(()=>j(a,k(W).cf_token)),r(e,s)};g(c,e=>{k(W).cf_token&&e(i)}),y(o);var d=f(o,2);X(d,{type:"submit",get loading(){return k(U)},class:"w-full",variant:"primary",children:(e,s)=>{var a=b(),t=m(a),o=e=>{var s=v("Verifying API token...");r(e,s)},n=e=>{var s=v("Login");r(e,s)};g(t,e=>{k(U)?e(o):e(n,!1)}),r(e,a)},$$slots:{default:!0}}),y(t),x(2),_(e=>{n.disabled=k(U),l=P(n,1,"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50 disabled:cursor-not-allowed svelte-m3w360",null,l,e)},[()=>({"border-red-300":k(W).cf_token,"focus:ring-red-500":k(W).cf_token,"focus:border-red-500":k(W).cf_token})],w),A(n,()=>k(N),e=>C(N,e)),I("input",n,z),I("submit",t,L(Y)),r(e,a)},$$slots:{default:!0}}),y(G),r(t,G),n(),F()}export{V as component};
